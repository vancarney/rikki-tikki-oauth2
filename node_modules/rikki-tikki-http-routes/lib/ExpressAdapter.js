// Generated by CoffeeScript 1.9.0
var Adapter, ExpressAdapter,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  __hasProp = {}.hasOwnProperty;

Adapter = require('rikki-tikki-route-adapter');

ExpressAdapter = (function(_super) {
  __extends(ExpressAdapter, _super);

  function ExpressAdapter() {
    return ExpressAdapter.__super__.constructor.apply(this, arguments);
  }

  ExpressAdapter.prototype.required = ['app'];

  ExpressAdapter.prototype.addRoute = function(route, method, handler) {
    var _base;
    return typeof (_base = this.params.app)[method] === "function" ? _base[method](route, handler || this.responseHandler) : void 0;
  };

  ExpressAdapter.prototype.responseHandler = function(res, data, headers) {
    var header, value;
    if (!headers) {
      res.setHeader('Content-Type', 'application/json');
    } else {
      for (header in headers) {
        value = headers[header];
        res.setHeader(header, value);
      }
    }
    return res.send(data.status, data.content);
  };

  ExpressAdapter.prototype.requestHandler = function() {
    return false;
  };

  return ExpressAdapter;

})(Adapter);

module.exports = ExpressAdapter;
